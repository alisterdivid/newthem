var quform=function(o,e,r){"use strict";var t,n=e(document);return t={activatedFancybox:!1,init:function(){n.on("click",".qfb-insert-form-trigger",t.loadPopup)},loadPopup:function(){e.ajax({url:r.ajaxUrl+"?action=quform_insert_form",dataType:"html"}).done(function(t){var i=e(t),f=function(){i.remove(),e("body").css("overflow",""),n.off("keydown.quform-close-popup")};i.on("change","#qfb-insert-form-id",o.insertForm.updateShortcodePreview),i.on("click","#qfb-insert-form-popup, #qfb-insert-form-show-title, #qfb-insert-form-show-description",o.insertForm.updateShortcodePreview),i.on("keyup blur","#qfb-insert-form-content, #qfb-insert-form-width, #qfb-insert-form-options",o.insertForm.updateShortcodePreview),i.on("click","#qfb-insert-form-preview",function(){e(this).focus().select()}),i.on("click",".qfb-insert-form-go",function(){var e=o.insertForm.generateShortcode();return e?"function"==typeof window.send_to_editor?(window.send_to_editor(e),f()):alert(r.couldNotSendToEditor):alert(r.selectForm),!1}),i.on("click",".qfb-insert-form-cancel, .qfb-insert-form-overlay",f),i.on("click","#qfb-insert-form-popup",function(){e("#qfb-insert-form-content, #qfb-insert-form-width, #qfb-insert-form-options").closest(".qfb-sub-setting")[e(this).is(":checked")?"slideDown":"slideUp"]()}),e("body").css("overflow","hidden"),i.appendTo(e("body")).show(),n.on("keydown.quform-close-popup",function(o){27==o.keyCode&&f()}),i.find(".qfb-popup-overlay").click(f),e("#qfb-insert-form-content, #qfb-insert-form-width, #qfb-insert-form-options").closest(".qfb-sub-setting").hide()})},generateShortcode:function(){var t=e("#qfb-insert-form-id").val(),n="";if(t){var i=e("#qfb-insert-form-id option:selected").text(),f=e("#qfb-insert-form-popup").is(":checked"),s=e("#qfb-insert-form-show-title").is(":checked"),c=e("#qfb-insert-form-show-description").is(":checked"),d="";if(s||(d+=' show_title="0"'),c||(d+=' show_description="0"'),f){var a=e("#qfb-insert-form-content").val(),p=e("#qfb-insert-form-width").val(),m=e("#qfb-insert-form-options").val();p.length&&(d+=' width="'+p+'"'),m.length&&(d+=" options='"+m+"'"),n='[quform_popup id="'+t+'" name="'+i+'"'+d+"]"+a+"[/quform_popup]",o.insertForm.activatedFancybox||(o.insertForm.activatedFancybox=!0,e.ajax({url:r.ajaxUrl,type:"POST",dataType:"json",data:{action:"quform_set_popup_enabled"}}))}else n='[quform id="'+t+'" name="'+i+'"'+d+"]"}return n},updateShortcodePreview:function(){var r=o.insertForm.generateShortcode(),t=e("#qfb-insert-form-preview");r?t.val(r).parent().show():t.val("").parent().hide()}},jQuery(document).ready(t.init),o.insertForm=t,o}(quform||{},jQuery,quformInsertFormL10n);