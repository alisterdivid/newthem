var quform=function(e,s,r,a){"use strict";var o,t=e.core,n=t.cache,i=!1,f=null,d=[];return o={init:function(){n.get("#qfb-save-entry").add(n.get("#qfb-fixed-save-button")).click(function(){o.saveEntry()}),n.get("#qfb-entry-form").on("click",".qfb-edit-file-upload-remove",function(){var e=s(this).closest(".qfb-edit-file-upload"),r=e.data("quform-upload-uid");r&&d.push(r),e.qfbSlideHide()})},saveEntry:function(){i||(i=!0,"number"==typeof f&&(clearTimeout(f),f=null),n.get("#qfb-fixed-save-button").removeClass("qfb-saving qfb-saved qfb-save-error").addClass("qfb-saving"),n.get("#qfb-entry-form").ajaxSubmit({type:"POST",dataType:"json",data:{quform_removed_upload_uids:d.join(",")},iframe:!0,url:"",success:function(e){switch(e=t.sanitiseResponse(e),e.type){case"success":o.responseSuccess(e);break;case"error":o.responseError(e);break;case"invalid":o.responseInvalid(e)}}}))},allowResubmission:function(){s(".qfb-has-validation-error").removeClass("qfb-has-validation-error"),s(".qfb-validation-error").remove(),i=!1},responseSuccess:function(e){o.allowResubmission(),d=[],t.showFixedMessage(e.message,"success"),n.get("#qfb-fixed-save-button").removeClass("qfb-saving").addClass("qfb-saved"),f=setTimeout(function(){n.get("#qfb-fixed-save-button").removeClass("qfb-saved")},2e3)},responseError:function(e){var r=null;o.allowResubmission(),n.get("#qfb-fixed-save-button").removeClass("qfb-saving").addClass("qfb-save-error"),f=setTimeout(function(){n.get("#qfb-fixed-save-button").removeClass("qfb-save-error")},2e3),t.isNonEmptyString(e.message)&&t.showFixedMessage(e.message,"error"),s.each(e.errors,function(e,a){var t=s(".qfb-edit-element-"+e);t.length&&(o.addElementError(e,a),r||(r=t))}),s(".qfb-validation-error").qfbSlideShow(),t.scrollTo(r)},addElementError:function(e,r){var a=s('<div class="qfb-validation-error qfb-cf">');return s('<div class="qfb-validation-error-inner">').appendTo(a).append(s('<span class="qfb-validation-error-text">').html(r)),s(".qfb-edit-element-"+e).addClass("qfb-has-validation-error"),s(".qfb-edit-input-"+e).after(a),a},responseInvalid:function(e){o.allowResubmission(),t.showFixedMessage(e.message,"error"),n.get("#qfb-fixed-save-button").removeClass("qfb-saving").addClass("qfb-save-error"),f=setTimeout(function(){n.get("#qfb-fixed-save-button").removeClass("qfb-save-error")},2e3)}},s(document).ready(o.init),e.entries=e.entries||{},e.entries.edit=o,e}(quform,jQuery,quformEntriesEditL10n,quformCoreL10n);