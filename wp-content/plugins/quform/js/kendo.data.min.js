!function(e,t){t("kendo.data",["kendo.core","kendo.data.odata","kendo.data.xml"],e)}(function(){return function(e,t){function r(e,t,r,n){return function(i){var a,s={};for(a in i)s[a]=i[a];n?s.field=r+"."+i.field:s.field=r,t==ue&&e._notifyChange&&e._notifyChange(s),e.trigger(t,s)}}function n(t,r){if(t===r)return!0;var i,a=e.type(t),s=e.type(r);if(a!==s)return!1;if("date"===a)return t.getTime()===r.getTime();if("object"!==a&&"array"!==a)return!1;for(i in t)if(!n(t[i],r[i]))return!1;return!0}function i(e,t){var r,n;for(n in e){if(r=e[n],H(r)&&r.field&&r.field===t)return r;if(r===t)return r}return null}function a(e){this.data=e||[]}function s(e,r){if(e){var n=typeof e===re?{field:e,dir:r}:e,i=W(n)?n:n!==t?[n]:[];return $(i,function(e){return!!e.dir})}}function o(e){var t,r,n,i,a=e.filters;if(a)for(t=0,r=a.length;t<r;t++)n=a[t],i=n.operator,i&&typeof i===re&&(n.operator=Ge[i.toLowerCase()]||i),o(n)}function u(e){if(e&&!V(e))return!W(e)&&e.filters||(e={logic:"and",filters:W(e)?e:[e]}),o(e),e}function l(e,t){return!e.logic&&!t.logic&&(e.field===t.field&&e.value===t.value&&e.operator===t.operator)}function f(e){return e=e||{},V(e)?{logic:"and",filters:[]}:u(e)}function d(e,t){return t.logic||e.field>t.field?1:e.field<t.field?-1:0}function h(e,t){if(e=f(e),t=f(t),e.logic!==t.logic)return!1;var r,n,i=(e.filters||[]).slice(),a=(t.filters||[]).slice();if(i.length!==a.length)return!1;i=i.sort(d),a=a.sort(d);for(var s=0;s<i.length;s++)if(r=i[s],n=a[s],r.logic&&n.logic){if(!h(r,n))return!1}else if(!l(r,n))return!1;return!0}function c(e){return W(e)?e:[e]}function g(e,r){var n=typeof e===re?{field:e,dir:r}:e,i=W(n)?n:n!==t?[n]:[];return L(i,function(e){return{field:e.field,dir:e.dir||"asc",aggregates:e.aggregates}})}function p(e,t){return e&&e.getTime&&t&&t.getTime?e.getTime()===t.getTime():e===t}function _(e,t,r,n,i,a){t=t||[];var s,o,u,l=t.length;for(s=0;s<l;s++){o=t[s],u=o.aggregate;var f=o.field;e[f]=e[f]||{},a[f]=a[f]||{},a[f][u]=a[f][u]||{},e[f][u]=Ee[u.toLowerCase()](e[f][u],r,Y.accessor(f),n,i,a[f][u])}}function v(e){return"number"==typeof e&&!isNaN(e)}function m(e){return e&&e.getTime}function y(e){var t,r=e.length,n=new Array(r);for(t=0;t<r;t++)n[t]=e[t].toJSON();return n}function S(e,t,r,n,i){var a,s,o,u,l,f={};for(u=0,l=e.length;u<l;u++){a=e[u];for(s in t)o=i[s],o&&o!==s&&(f[o]||(f[o]=Y.setter(o)),f[o](a,t[s](a)),delete a[s])}}function b(e,t,r,n,i){var a,s,o,u,l;for(u=0,l=e.length;u<l;u++){a=e[u];for(s in t)a[s]=r._parse(s,t[s](a)),o=i[s],o&&o!==s&&delete a[o]}}function w(e,t,r,n,i){var a,s,o,u;for(s=0,u=e.length;s<u;s++)a=e[s],o=n[a.field],o&&o!=a.field&&(a.field=o),a.value=r._parse(a.field,a.value),a.hasSubgroups?w(a.items,t,r,n,i):b(a.items,t,r,n,i)}function k(e,t,r,n,i,a){return function(s){return s=e(s),s&&!V(n)&&("[object Array]"===Oe.call(s)||s instanceof Pe||(s=[s]),r(s,n,new t,i,a)),s||[]}}function x(e,t,r,n){for(var i,a,s=0;t.length&&n;){i=t[s],a=i.items;var o=a.length;if(e&&e.field===i.field&&e.value===i.value?(e.hasSubgroups&&e.items.length?x(e.items[e.items.length-1],i.items,r,n):(a=a.slice(r,r+n),e.items=e.items.concat(a)),t.splice(s--,1)):i.hasSubgroups&&a.length?(x(i,a,r,n),i.items.length||t.splice(s--,1)):(a=a.slice(r,r+n),i.items=a,i.items.length||t.splice(s--,1)),0===a.length?r-=o:(r=0,n-=a.length),++s>=t.length)break}s<t.length&&t.splice(s,t.length-s)}function q(e){var t,r,n,i,a=[];for(t=0,r=e.length;t<r;t++){var s=e.at(t);if(s.hasSubgroups)a=a.concat(q(s.items));else for(n=s.items,i=0;i<n.length;i++)a.push(n.at(i))}return a}function D(e,t){var r,n,i;if(t)for(r=0,n=e.length;r<n;r++)i=e.at(r),i.hasSubgroups?D(i.items,t):i.items=new Ce(i.items,t)}function O(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r].hasSubgroups){if(O(e[r].items,t))return!0}else if(t(e[r].items,e[r]))return!0}function z(e,t,r,n){for(var i=0;i<e.length&&e[i].data!==t&&!R(e[i].data,r,n);i++);}function R(e,t,r){for(var n=0,i=e.length;n<i;n++){if(e[n]&&e[n].hasSubgroups)return R(e[n].items,t,r);if(e[n]===t||e[n]===r)return e[n]=r,!0}}function P(e,r,n,i,a){for(var s=0,o=e.length;s<o;s++){var u=e[s];if(u&&!(u instanceof i))if(u.hasSubgroups===t||a){for(var l=0;l<r.length;l++)if(r[l]===u){e[s]=r.at(l),z(n,r,u,e[s]);break}}else P(u.items,r,n,i,a)}}function C(e,t){var r,n;for(r=0,n=e.length;r<n;r++){var i=e.at(r);if(i.uid==t.uid)return e.splice(r,1),i}}function T(e,t){return t?A(e,function(e){return e.uid&&e.uid==t.uid||e[t.idField]===t.id&&t.id!==t._defaultId}):-1}function F(e,t){return t?A(e,function(e){return e.uid==t.uid}):-1}function A(e,t){var r,n;for(r=0,n=e.length;r<n;r++)if(t(e[r]))return r;return-1}function I(e,t){if(e&&!V(e)){var r,n=e[t];return r=H(n)?n.from||n.field||t:e[t]||t,Z(r)?t:r}return t}function N(e,t){var r,n,i={};for(var a in e)"filters"!==a&&(i[a]=e[a]);if(e.filters)for(i.filters=[],r=0,n=e.filters.length;r<n;r++)i.filters[r]=N(e.filters[r],t);else i.field=I(t.fields,i.field);return i}function M(e,t){var r,n,i,a,s=[];for(r=0,n=e.length;r<n;r++){i={},a=e[r];for(var o in a)i[o]=a[o];i.field=I(t.fields,i.field),i.aggregates&&W(i.aggregates)&&(i.aggregates=M(i.aggregates,t)),s.push(i)}return s}function j(t,r){t=e(t)[0];var n,i,a,s,o,u,l=t.options,f=r[0],d=r[1],h=[];for(n=0,i=l.length;n<i;n++)o={},s=l[n],a=s.parentNode,a===t&&(a=null),s.disabled||a&&a.disabled||(a&&(o.optgroup=a.label),o[f.field]=s.text,u=s.attributes.value,u=u&&u.specified?s.value:s.text,o[d.field]=u,h.push(o));return h}function G(t,r){var n,i,a,s,o,u,l,f=e(t)[0].tBodies[0],d=f?f.rows:[],h=r.length,c=[];for(n=0,i=d.length;n<i;n++){for(o={},l=!0,s=d[n].cells,a=0;a<h;a++)u=s[a],"th"!==u.nodeName.toLowerCase()&&(l=!1,o[r[a].field]=u.innerHTML);l||c.push(o)}return c}function E(e){return function(){var t=this._data,r=He.fn[e].apply(this,qe.call(arguments));return this._data!=t&&this._attachBubbleHandlers(),r}}function B(t,r){function n(e,t){return e.filter(t).add(e.find(t))}var i,a,s,o,u,l,f,d,h=e(t).children(),c=[],g=r[0].field,p=r[1]&&r[1].field,_=r[2]&&r[2].field,v=r[3]&&r[3].field;for(i=0,a=h.length;i<a;i++)s={_loaded:!0},o=h.eq(i),l=o[0].firstChild,d=o.children(),t=d.filter("ul"),d=d.filter(":not(ul)"),u=o.attr("data-id"),u&&(s.id=u),l&&(s[g]=3==l.nodeType?l.nodeValue:d.text()),p&&(s[p]=n(d,"a").attr("href")),v&&(s[v]=n(d,"img").attr("src")),_&&(f=n(d,".k-sprite").prop("className"),s[_]=f&&e.trim(f.replace("k-sprite",""))),t.length&&(s.items=B(t.eq(0),r)),"true"==o.attr("data-hasChildren")&&(s.hasChildren=!0),c.push(s);return c}var L,U=e.extend,J=e.proxy,H=e.isPlainObject,V=e.isEmptyObject,W=e.isArray,$=e.grep,Q=e.ajax,K=e.each,X=e.noop,Y=window.kendo,Z=Y.isFunction,ee=Y.Observable,te=Y.Class,re="string",ne="function",ie="create",ae="read",se="update",oe="destroy",ue="change",le="sync",fe="get",de="error",he="requestStart",ce="progress",ge="requestEnd",pe=[ie,ae,se,oe],_e=function(e){return e},ve=Y.getter,me=Y.stringify,ye=Math,Se=[].push,be=[].join,we=[].pop,ke=[].splice,xe=[].shift,qe=[].slice,De=[].unshift,Oe={}.toString,ze=Y.support.stableSort,Re=/^\/Date\((.*?)\)\/$/,Pe=ee.extend({init:function(e,t){var r=this;r.type=t||Te,ee.fn.init.call(r),r.length=e.length,r.wrapAll(e,r)},at:function(e){return this[e]},toJSON:function(){var e,t,r=this.length,n=new Array(r);for(e=0;e<r;e++)t=this[e],t instanceof Te&&(t=t.toJSON()),n[e]=t;return n},parent:X,wrapAll:function(e,t){var r,n,i=this,a=function(){return i};for(t=t||[],r=0,n=e.length;r<n;r++)t[r]=i.wrap(e[r],a);return t},wrap:function(e,t){var r,n=this;return null!==e&&"[object Object]"===Oe.call(e)&&(r=e instanceof n.type||e instanceof Ie,r||(e=e instanceof Te?e.toJSON():e,e=new n.type(e)),e.parent=t,e.bind(ue,function(e){n.trigger(ue,{field:e.field,node:e.node,index:e.index,items:e.items||[this],action:e.node?e.action||"itemloaded":"itemchange"})})),e},push:function(){var e,t=this.length,r=this.wrapAll(arguments);return e=Se.apply(this,r),this.trigger(ue,{action:"add",index:t,items:r}),e},slice:qe,sort:[].sort,join:be,pop:function(){var e=this.length,t=we.apply(this);return e&&this.trigger(ue,{action:"remove",index:e-1,items:[t]}),t},splice:function(e,t,r){var n,i,a,s=this.wrapAll(qe.call(arguments,2));if(n=ke.apply(this,[e,t].concat(s)),n.length)for(this.trigger(ue,{action:"remove",index:e,items:n}),i=0,a=n.length;i<a;i++)n[i]&&n[i].children&&n[i].unbind(ue);return r&&this.trigger(ue,{action:"add",index:e,items:s}),n},shift:function(){var e=this.length,t=xe.apply(this);return e&&this.trigger(ue,{action:"remove",index:0,items:[t]}),t},unshift:function(){var e,t=this.wrapAll(arguments);return e=De.apply(this,t),this.trigger(ue,{action:"add",index:0,items:t}),e},indexOf:function(e){var t,r,n=this;for(t=0,r=n.length;t<r;t++)if(n[t]===e)return t;return-1},forEach:function(e){for(var t=0,r=this.length;t<r;t++)e(this[t],t,this)},map:function(e){for(var t=0,r=[],n=this.length;t<n;t++)r[t]=e(this[t],t,this);return r},reduce:function(e){var t,r=0,n=this.length;for(2==arguments.length?t=arguments[1]:r<n&&(t=this[r++]);r<n;r++)t=e(t,this[r],r,this);return t},reduceRight:function(e){var t,r=this.length-1;for(2==arguments.length?t=arguments[1]:r>0&&(t=this[r--]);r>=0;r--)t=e(t,this[r],r,this);return t},filter:function(e){for(var t,r=0,n=[],i=this.length;r<i;r++)t=this[r],e(t,r,this)&&(n[n.length]=t);return n},find:function(e){for(var t,r=0,n=this.length;r<n;r++)if(t=this[r],e(t,r,this))return t},every:function(e){for(var t,r=0,n=this.length;r<n;r++)if(t=this[r],!e(t,r,this))return!1;return!0},some:function(e){for(var t,r=0,n=this.length;r<n;r++)if(t=this[r],e(t,r,this))return!0;return!1},remove:function(e){var t=this.indexOf(e);t!==-1&&this.splice(t,1)},empty:function(){this.splice(0,this.length)}});"undefined"!=typeof Symbol&&Symbol.iterator&&!Pe.prototype[Symbol.iterator]&&(Pe.prototype[Symbol.iterator]=[][Symbol.iterator]);var Ce=Pe.extend({init:function(e,t){ee.fn.init.call(this),this.type=t||Te;for(var r=0;r<e.length;r++)this[r]=e[r];this.length=r,this._parent=J(function(){return this},this)},at:function(e){var t=this[e];return t instanceof this.type?t.parent=this._parent:t=this[e]=this.wrap(t,this._parent),t}}),Te=ee.extend({init:function(e){var t,r,n=this,i=function(){return n};ee.fn.init.call(this),this._handlers={};for(r in e)t=e[r],"object"==typeof t&&t&&!t.getTime&&"_"!=r.charAt(0)&&(t=n.wrap(t,r,i)),n[r]=t;n.uid=Y.guid()},shouldSerialize:function(e){return this.hasOwnProperty(e)&&"_handlers"!==e&&"_events"!==e&&typeof this[e]!==ne&&"uid"!==e},forEach:function(e){for(var t in this)this.shouldSerialize(t)&&e(this[t],t)},toJSON:function(){var e,t,r={};for(t in this)this.shouldSerialize(t)&&(e=this[t],(e instanceof Te||e instanceof Pe)&&(e=e.toJSON()),r[t]=e);return r},get:function(e){var t,r=this;return r.trigger(fe,{field:e}),t="this"===e?r:Y.getter(e,!0)(r)},_set:function(e,t){var r=this,n=e.indexOf(".")>=0;if(n)for(var i=e.split("."),a="";i.length>1;){a+=i.shift();var s=Y.getter(a,!0)(r);if(s instanceof Te)return s.set(i.join("."),t),n;a+="."}return Y.setter(e)(r,t),n},set:function(e,t){var r=this,n=!1,i=e.indexOf(".")>=0,a=Y.getter(e,!0)(r);return a!==t&&(a instanceof ee&&this._handlers[e]&&(this._handlers[e].get&&a.unbind(fe,this._handlers[e].get),a.unbind(ue,this._handlers[e].change)),n=r.trigger("set",{field:e,value:t}),n||(i||(t=r.wrap(t,e,function(){return r})),(!r._set(e,t)||e.indexOf("(")>=0||e.indexOf("[")>=0)&&r.trigger(ue,{field:e}))),n},parent:X,wrap:function(e,t,n){var i,a,s=this,o=Oe.call(e);if(null!=e&&("[object Object]"===o||"[object Array]"===o)){var u=e instanceof Pe,l=e instanceof He;"[object Object]"!==o||l||u?("[object Array]"===o||u||l)&&(u||l||(e=new Pe(e)),a=r(s,ue,t,!1),e.bind(ue,a),s._handlers[t]={change:a}):(e instanceof Te||(e=new Te(e)),i=r(s,fe,t,!0),e.bind(fe,i),a=r(s,ue,t,!0),e.bind(ue,a),s._handlers[t]={get:i,change:a}),e.parent=n}return e}}),Fe={number:function(e){return Y.parseFloat(e)},date:function(e){return Y.parseDate(e)},"boolean":function(e){return typeof e===re?"true"===e.toLowerCase():null!=e?!!e:e},string:function(e){return null!=e?e+"":e},"default":function(e){return e}},Ae={string:"",number:0,date:new Date,"boolean":!1,"default":""},Ie=Te.extend({init:function(r){var n=this;if((!r||e.isEmptyObject(r))&&(r=e.extend({},n.defaults,r),n._initializers))for(var i=0;i<n._initializers.length;i++){var a=n._initializers[i];r[a]=n.defaults[a]()}Te.fn.init.call(n,r),n.dirty=!1,n.idField&&(n.id=n.get(n.idField),n.id===t&&(n.id=n._defaultId))},shouldSerialize:function(e){return Te.fn.shouldSerialize.call(this,e)&&"uid"!==e&&!("id"!==this.idField&&"id"===e)&&"dirty"!==e&&"_accessors"!==e},_parse:function(e,t){var r,n=this,a=e,s=n.fields||{};return e=s[e],e||(e=i(s,a)),e&&(r=e.parse,!r&&e.type&&(r=Fe[e.type.toLowerCase()])),r?r(t):t},_notifyChange:function(e){var t=e.action;"add"!=t&&"remove"!=t||(this.dirty=!0)},editable:function(e){return e=(this.fields||{})[e],!e||e.editable!==!1},set:function(e,t,r){var i=this,a=i.dirty;i.editable(e)&&(t=i._parse(e,t),n(t,i.get(e))||(i.dirty=!0,Te.fn.set.call(i,e,t,r)&&!a&&(i.dirty=a)))},accept:function(e){var t,r=this,n=function(){return r};for(t in e){var i=e[t];"_"!=t.charAt(0)&&(i=r.wrap(e[t],t,n)),r._set(t,i)}r.idField&&(r.id=r.get(r.idField)),r.dirty=!1},isNew:function(){return this.id===this._defaultId}});Ie.define=function(e,r){r===t&&(r=e,e=Ie);var n,i,a,s,o,u,l,f,d=U({defaults:{}},r),h={},c=d.id,g=[];if(c&&(d.idField=c),d.id&&delete d.id,c&&(d.defaults[c]=d._defaultId=""),"[object Array]"===Oe.call(d.fields)){for(u=0,l=d.fields.length;u<l;u++)a=d.fields[u],typeof a===re?h[a]={}:a.field&&(h[a.field]=a);d.fields=h}for(i in d.fields)a=d.fields[i],s=a.type||"default",o=null,f=i,i=typeof a.field===re?a.field:i,a.nullable||(o=d.defaults[f!==i?f:i]=a.defaultValue!==t?a.defaultValue:Ae[s.toLowerCase()],"function"==typeof o&&g.push(i)),r.id===i&&(d._defaultId=o),d.defaults[f!==i?f:i]=o,a.parse=a.parse||Fe[s];return g.length>0&&(d._initializers=g),n=e.extend(d),n.define=function(e){return Ie.define(n,e)},d.fields&&(n.fields=d.fields,n.idField=d.idField),n};var Ne={selector:function(e){return Z(e)?e:ve(e)},compare:function(e){var t=this.selector(e);return function(e,r){return e=t(e),r=t(r),null==e&&null==r?0:null==e?-1:null==r?1:e.localeCompare?e.localeCompare(r):e>r?1:e<r?-1:0}},create:function(e){var t=e.compare||this.compare(e.field);return"desc"==e.dir?function(e,r){return t(r,e,!0)}:t},combine:function(e){return function(t,r){var n,i,a=e[0](t,r);for(n=1,i=e.length;n<i;n++)a=a||e[n](t,r);return a}}},Me=U({},Ne,{asc:function(e){var t=this.selector(e);return function(e,r){var n=t(e),i=t(r);return n&&n.getTime&&i&&i.getTime&&(n=n.getTime(),i=i.getTime()),n===i?e.__position-r.__position:null==n?-1:null==i?1:n.localeCompare?n.localeCompare(i):n>i?1:-1}},desc:function(e){var t=this.selector(e);return function(e,r){var n=t(e),i=t(r);return n&&n.getTime&&i&&i.getTime&&(n=n.getTime(),i=i.getTime()),n===i?e.__position-r.__position:null==n?1:null==i?-1:i.localeCompare?i.localeCompare(n):n<i?1:-1}},create:function(e){return this[e.dir](e.field)}});L=function(e,t){var r,n=e.length,i=new Array(n);for(r=0;r<n;r++)i[r]=t(e[r],r,e);return i};var je=function(){function e(e){return"string"==typeof e&&(e=e.replace(/[\r\n]+/g,"")),JSON.stringify(e)}function t(t){return function(r,n,i){return n+="",i&&(r="("+r+" || '').toLowerCase()",n=n.toLowerCase()),t(r,e(n),i)}}function r(t,r,n,i){if(null!=n){if(typeof n===re){var a=Re.exec(n);a?n=new Date(+a[1]):i?(n=e(n.toLowerCase()),r="(("+r+" || '')+'').toLowerCase()"):n=e(n)}n.getTime&&(r="("+r+"&&"+r+".getTime?"+r+".getTime():"+r+")",n=n.getTime())}return r+" "+t+" "+n}function n(e){for(var t="/^",r=!1,n=0;n<e.length;++n){var i=e.charAt(n);if(r)t+="\\"+i;else{if("~"==i){r=!0;continue}t+="*"==i?".*":"?"==i?".":".+^$()[]{}|\\/\n\r\u2028\u2029 ".indexOf(i)>=0?"\\"+i:i}r=!1}return t+"$/"}return{quote:function(t){return t&&t.getTime?"new Date("+t.getTime()+")":e(t)},eq:function(e,t,n){return r("==",e,t,n)},neq:function(e,t,n){return r("!=",e,t,n)},gt:function(e,t,n){return r(">",e,t,n)},gte:function(e,t,n){return r(">=",e,t,n)},lt:function(e,t,n){return r("<",e,t,n)},lte:function(e,t,n){return r("<=",e,t,n)},startswith:t(function(e,t){return e+".lastIndexOf("+t+", 0) == 0"}),doesnotstartwith:t(function(e,t){return e+".lastIndexOf("+t+", 0) == -1"}),endswith:t(function(e,t){var r=t?t.length-2:0;return e+".indexOf("+t+", "+e+".length - "+r+") >= 0"}),doesnotendwith:t(function(e,t){var r=t?t.length-2:0;return e+".indexOf("+t+", "+e+".length - "+r+") < 0"}),contains:t(function(e,t){return e+".indexOf("+t+") >= 0"}),doesnotcontain:t(function(e,t){return e+".indexOf("+t+") == -1"}),matches:t(function(e,t){return t=t.substring(1,t.length-1),n(t)+".test("+e+")"}),doesnotmatch:t(function(e,t){return t=t.substring(1,t.length-1),"!"+n(t)+".test("+e+")"}),isempty:function(e){return e+" === ''"},isnotempty:function(e){return e+" !== ''"},isnull:function(e){return"("+e+" == null)"},isnotnull:function(e){return"("+e+" != null)"}}}();a.filterExpr=function(e){var r,n,i,s,o,u,l=[],f={and:" && ",or:" || "},d=[],h=[],c=e.filters;for(r=0,n=c.length;r<n;r++)i=c[r],o=i.field,u=i.operator,i.filters?(s=a.filterExpr(i),i=s.expression.replace(/__o\[(\d+)\]/g,function(e,t){return t=+t,"__o["+(h.length+t)+"]"}).replace(/__f\[(\d+)\]/g,function(e,t){return t=+t,"__f["+(d.length+t)+"]"}),h.push.apply(h,s.operators),d.push.apply(d,s.fields)):(typeof o===ne?(s="__f["+d.length+"](d)",d.push(o)):s=Y.expr(o),typeof u===ne?(i="__o["+h.length+"]("+s+", "+je.quote(i.value)+")",h.push(u)):i=je[(u||"eq").toLowerCase()](s,i.value,i.ignoreCase===t||i.ignoreCase)),l.push(i);return{expression:"("+l.join(f[e.logic])+")",fields:d,operators:h}};var Ge={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq",ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",greaterthanequal:"gte",ge:"gte",notsubstringof:"doesnotcontain",isnull:"isnull",isempty:"isempty",isnotempty:"isnotempty"};a.normalizeFilter=u,a.compareFilters=h,a.prototype={toArray:function(){return this.data},range:function(e,t){return new a(this.data.slice(e,e+t))},skip:function(e){return new a(this.data.slice(e))},take:function(e){return new a(this.data.slice(0,e))},select:function(e){return new a(L(this.data,e))},order:function(e,t){var r={dir:t};return e&&(e.compare?r.compare=e.compare:r.field=e),new a(this.data.slice(0).sort(Ne.create(r)))},orderBy:function(e){return this.order(e,"asc")},orderByDescending:function(e){return this.order(e,"desc")},sort:function(e,t,r){var n,i,a=s(e,t),o=[];if(r=r||Ne,a.length){for(n=0,i=a.length;n<i;n++)o.push(r.create(a[n]));return this.orderBy({compare:r.combine(o)})}return this},filter:function(e){var t,r,n,i,s,o,l,f,d=this.data,h=[];if(e=u(e),!e||0===e.filters.length)return this;for(i=a.filterExpr(e),o=i.fields,l=i.operators,s=f=new Function("d, __f, __o","return "+i.expression),(o.length||l.length)&&(f=function(e){return s(e,o,l)}),t=0,n=d.length;t<n;t++)r=d[t],f(r)&&h.push(r);return new a(h)},group:function(e,t){e=g(e||[]),t=t||this.data;var r,n=this,i=new a(n.data);return e.length>0&&(r=e[0],i=i.groupBy(r).select(function(n){var i=new a(t).filter([{field:n.field,operator:"eq",value:n.value,ignoreCase:!1}]);return{field:n.field,value:n.value,items:e.length>1?new a(n.items).group(e.slice(1),i.toArray()).toArray():n.items,hasSubgroups:e.length>1,aggregates:i.aggregate(r.aggregates)}})),i},groupBy:function(e){if(V(e)||!this.data.length)return new a([]);var t,r,n,i,s=e.field,o=this._sortForGrouping(s,e.dir||"asc"),u=Y.accessor(s),l=u.get(o[0],s),f={field:s,value:l,items:[]},d=[f];for(n=0,i=o.length;n<i;n++)t=o[n],r=u.get(t,s),p(l,r)||(l=r,f={field:s,value:l,items:[]},d.push(f)),f.items.push(t);return new a(d)},_sortForGrouping:function(e,t){var r,n,i=this.data;if(!ze){for(r=0,n=i.length;r<n;r++)i[r].__position=r;for(i=new a(i).sort(e,t,Me).toArray(),r=0,n=i.length;r<n;r++)delete i[r].__position;return i}return this.sort(e,t).toArray()},aggregate:function(e){var t,r,n={},i={};if(e&&e.length)for(t=0,r=this.data.length;t<r;t++)_(n,e,this.data[t],t,r,i);return n}};var Ee={sum:function(e,t,r){var n=r.get(t);return v(e)?v(n)&&(e+=n):e=n,e},count:function(e){return(e||0)+1},average:function(e,r,n,i,a,s){var o=n.get(r);return s.count===t&&(s.count=0),v(e)?v(o)&&(e+=o):e=o,v(o)&&s.count++,i==a-1&&v(e)&&(e/=s.count),e},max:function(e,t,r){var n=r.get(t);return v(e)||m(e)||(e=n),e<n&&(v(n)||m(n))&&(e=n),e},min:function(e,t,r){var n=r.get(t);return v(e)||m(e)||(e=n),e>n&&(v(n)||m(n))&&(e=n),e}};a.process=function(e,r){r=r||{};var n,i=new a(e),o=r.group,u=g(o||[]).concat(s(r.sort||[])),l=r.filterCallback,f=r.filter,d=r.skip,h=r.take;return f&&(i=i.filter(f),l&&(i=l(i)),n=i.toArray().length),u&&(i=i.sort(u),o&&(e=i.toArray())),d!==t&&h!==t&&(i=i.range(d,h)),o&&(i=i.group(o,e)),{total:n,data:i.toArray()}};var Be=te.extend({init:function(e){this.data=e.data},read:function(e){e.success(this.data)},update:function(e){e.success(e.data)},create:function(e){e.success(e.data)},destroy:function(e){e.success(e.data)}}),Le=te.extend({init:function(e){var t,r=this;e=r.options=U({},r.options,e),K(pe,function(t,r){typeof e[r]===re&&(e[r]={url:e[r]})}),r.cache=e.cache?Ue.create(e.cache):{find:X,add:X},t=e.parameterMap,Z(e.push)&&(r.push=e.push),r.push||(r.push=_e),r.parameterMap=Z(t)?t:function(e){var r={};return K(e,function(e,n){e in t&&(e=t[e],H(e)&&(n=e.value(n),e=e.key)),r[e]=n}),r}},options:{parameterMap:_e},create:function(e){return Q(this.setup(e,ie))},read:function(r){var n,i,a,s=this,o=s.cache;r=s.setup(r,ae),n=r.success||X,i=r.error||X,a=o.find(r.data),a!==t?n(a):(r.success=function(e){o.add(r.data,e),n(e)},e.ajax(r))},update:function(e){return Q(this.setup(e,se))},destroy:function(e){return Q(this.setup(e,oe))},setup:function(e,t){e=e||{};var r,n=this,i=n.options[t],a=Z(i.data)?i.data(e.data):i.data;return e=U(!0,{},i,e),r=U(!0,{},a,e.data),e.data=n.parameterMap(r,t),Z(e.url)&&(e.url=e.url(r)),e}}),Ue=te.extend({init:function(){this._store={}},add:function(e,r){e!==t&&(this._store[me(e)]=r)},find:function(e){return this._store[me(e)]},clear:function(){this._store={}},remove:function(e){delete this._store[me(e)]}});Ue.create=function(e){var t={inmemory:function(){return new Ue}};return H(e)&&Z(e.find)?e:e===!0?new Ue:t[e]()};var Je=te.extend({init:function(e){var t,r,n,i,a=this;e=e||{};for(t in e)r=e[t],a[t]=typeof r===re?ve(r):r;i=e.modelBase||Ie,H(a.model)&&(a.model=n=i.define(a.model));var s=J(a.data,a);if(a._dataAccessFunction=s,a.model){var o,u=J(a.groups,a),l=J(a.serialize,a),f={},d={},h={},c={},g=!1;n=a.model,n.fields&&(K(n.fields,function(e,t){var r;o=e,H(t)&&t.field?o=t.field:typeof t===re&&(o=t),H(t)&&t.from&&(r=t.from),g=g||r&&r!==e||o!==e,d[e]=ve(r||o),h[e]=ve(e),f[r||o]=e,c[e]=r||o}),!e.serialize&&g&&(a.serialize=k(l,n,S,h,f,c))),a._dataAccessFunction=s,a.data=k(s,n,b,d,f,c),a.groups=k(u,n,w,d,f,c)}},errors:function(e){return e?e.errors:null},parse:_e,data:_e,total:function(e){return e.length},groups:_e,aggregates:function(){return{}},serialize:function(e){return e}}),He=ee.extend({init:function(e){var r,n,i=this;if(e&&(n=e.data),e=i.options=U({},i.options,e),i._map={},i._prefetch={},i._data=[],i._pristineData=[],i._ranges=[],i._view=[],i._pristineTotal=0,i._destroyed=[],i._pageSize=e.pageSize,i._page=e.page||(e.pageSize?1:t),i._sort=s(e.sort),i._filter=u(e.filter),i._group=g(e.group),i._aggregate=e.aggregate,i._total=e.total,i._shouldDetachObservableParents=!0,ee.fn.init.call(i),i.transport=Ve.create(e,n,i),Z(i.transport.push)&&i.transport.push({pushCreate:J(i._pushCreate,i),pushUpdate:J(i._pushUpdate,i),pushDestroy:J(i._pushDestroy,i)}),null!=e.offlineStorage)if("string"==typeof e.offlineStorage){var a=e.offlineStorage;i._storage={getItem:function(){return JSON.parse(localStorage.getItem(a))},setItem:function(e){localStorage.setItem(a,me(i.reader.serialize(e)))}}}else i._storage=e.offlineStorage;i.reader=new Y.data.readers[e.schema.type||"json"](e.schema),r=i.reader.model||{},i._detachObservableParents(),i._data=i._observe(i._data),i._online=!0,i.bind(["push",de,ue,he,le,ge,ce],e)},options:{data:null,schema:{modelBase:Ie},offlineStorage:null,serverSorting:!1,serverPaging:!1,serverFiltering:!1,serverGrouping:!1,serverAggregates:!1,batch:!1},clone:function(){return this},online:function(r){return r!==t?this._online!=r&&(this._online=r,r)?this.sync():e.Deferred().resolve().promise():this._online},offlineData:function(e){return null==this.options.offlineStorage?null:e!==t?this._storage.setItem(e):this._storage.getItem()||[]},_isServerGrouped:function(){var e=this.group()||[];return this.options.serverGrouping&&e.length},_pushCreate:function(e){this._push(e,"pushCreate")},_pushUpdate:function(e){this._push(e,"pushUpdate")},_pushDestroy:function(e){this._push(e,"pushDestroy")},_push:function(e,t){var r=this._readData(e);r||(r=e),this[t](r)},_flatData:function(e,t){if(e){if(this._isServerGrouped())return q(e);if(!t)for(var r=0;r<e.length;r++)e.at(r)}return e},parent:X,get:function(e){var t,r,n=this._flatData(this._data);for(t=0,r=n.length;t<r;t++)if(n[t].id==e)return n[t]},getByUid:function(e){var t,r,n=this._flatData(this._data);if(n)for(t=0,r=n.length;t<r;t++)if(n[t].uid==e)return n[t]},indexOf:function(e){return F(this._data,e)},at:function(e){return this._data.at(e)},data:function(e){var r=this;if(e===t){if(r._data)for(var n=0;n<r._data.length;n++)r._data.at(n);return r._data}r._detachObservableParents(),r._data=this._observe(e),r._pristineData=e.slice(0),r._storeData(),r._ranges=[],r.trigger("reset"),r._addRange(r._data),r._total=r._data.length,r._pristineTotal=r._total,r._process(r._data)},view:function(e){return e===t?this._view:void(this._view=this._observeView(e))},_observeView:function(e){var t=this;P(e,t._data,t._ranges,t.reader.model||Te,t._isServerGrouped());var r=new Ce(e,t.reader.model);return r.parent=function(){return t.parent()},r},flatView:function(){var e=this.group()||[];return e.length?q(this._view):this._view},add:function(e){return this.insert(this._data.length,e)},_createNewModel:function(e){return this.reader.model?new this.reader.model(e):e instanceof Te?e:new Te(e)},insert:function(e,t){return t||(t=e,e=0),t instanceof Ie||(t=this._createNewModel(t)),this._isServerGrouped()?this._data.splice(e,0,this._wrapInEmptyGroup(t)):this._data.splice(e,0,t),t},pushCreate:function(e){W(e)||(e=[e]);var t=[],r=this.options.autoSync;this.options.autoSync=!1;try{for(var n=0;n<e.length;n++){var i=e[n],a=this.add(i);t.push(a);var s=a.toJSON();this._isServerGrouped()&&(s=this._wrapInEmptyGroup(s)),this._pristineData.push(s)}}finally{this.options.autoSync=r}t.length&&this.trigger("push",{type:"create",items:t})},pushUpdate:function(e){W(e)||(e=[e]);for(var t=[],r=0;r<e.length;r++){var n=e[r],i=this._createNewModel(n),a=this.get(i.id);a?(t.push(a),a.accept(n),a.trigger(ue),this._updatePristineForModel(a,n)):this.pushCreate(n)}t.length&&this.trigger("push",{type:"update",items:t})},pushDestroy:function(e){var t=this._removeItems(e);t.length&&this.trigger("push",{type:"destroy",items:t})},_removeItems:function(e){W(e)||(e=[e]);var t=[],r=this.options.autoSync;this.options.autoSync=!1;try{for(var n=0;n<e.length;n++){var i=e[n],a=this._createNewModel(i),s=!1;this._eachItem(this._data,function(e){for(var r=0;r<e.length;r++){var n=e.at(r);if(n.id===a.id){t.push(n),e.splice(r,1),s=!0;break}}}),s&&(this._removePristineForModel(a),this._destroyed.pop())}}finally{this.options.autoSync=r}return t},remove:function(e){var t,r=this,n=r._isServerGrouped();return this._eachItem(r._data,function(i){if(t=C(i,e),t&&n)return t.isNew&&t.isNew()||r._destroyed.push(t),!0}),this._removeModelFromRanges(e),this._updateRangesLength(),e},destroyed:function(){return this._destroyed},created:function(){var e,t,r=[],n=this._flatData(this._data);for(e=0,t=n.length;e<t;e++)n[e].isNew&&n[e].isNew()&&r.push(n[e]);return r},updated:function(){var e,t,r=[],n=this._flatData(this._data);for(e=0,t=n.length;e<t;e++)n[e].isNew&&!n[e].isNew()&&n[e].dirty&&r.push(n[e]);return r},sync:function(){var t=this,r=[],n=[],i=t._destroyed,a=e.Deferred().resolve().promise();if(t.online()){if(!t.reader.model)return a;r=t.created(),n=t.updated();var s=[];t.options.batch&&t.transport.submit?s=t._sendSubmit(r,n,i):(s.push.apply(s,t._send("create",r)),s.push.apply(s,t._send("update",n)),s.push.apply(s,t._send("destroy",i))),a=e.when.apply(null,s).then(function(){var e,r;for(e=0,r=arguments.length;e<r;e++)arguments[e]&&t._accept(arguments[e]);t._storeData(!0),t._change({action:"sync"}),t.trigger(le)})}else t._storeData(!0),t._change({action:"sync"});return a},cancelChanges:function(e){var t=this;e instanceof Y.data.Model?t._cancelModel(e):(t._destroyed=[],t._detachObservableParents(),t._data=t._observe(t._pristineData),t.options.serverPaging&&(t._total=t._pristineTotal),t._ranges=[],t._addRange(t._data),t._change(),t._markOfflineUpdatesAsDirty())},_markOfflineUpdatesAsDirty:function(){var e=this;null!=e.options.offlineStorage&&e._eachItem(e._data,function(e){for(var t=0;t<e.length;t++){var r=e.at(t);"update"!=r.__state__&&"create"!=r.__state__||(r.dirty=!0)}})},hasChanges:function(){var e,t,r=this._flatData(this._data);if(this._destroyed.length)return!0;for(e=0,t=r.length;e<t;e++)if(r[e].isNew&&r[e].isNew()||r[e].dirty)return!0;return!1},_accept:function(t){var r,n=this,i=t.models,a=t.response,s=0,o=n._isServerGrouped(),u=n._pristineData,l=t.type;if(n.trigger(ge,{response:a,type:l}),a&&!V(a)){if(a=n.reader.parse(a),n._handleCustomErrors(a))return;a=n.reader.data(a),W(a)||(a=[a])}else a=e.map(i,function(e){return e.toJSON()});for("destroy"===l&&(n._destroyed=[]),s=0,r=i.length;s<r;s++)"destroy"!==l?(i[s].accept(a[s]),"create"===l?u.push(o?n._wrapInEmptyGroup(i[s]):a[s]):"update"===l&&n._updatePristineForModel(i[s],a[s])):n._removePristineForModel(i[s])},_updatePristineForModel:function(e,t){this._executeOnPristineForModel(e,function(e,r){Y.deepExtend(r[e],t)})},_executeOnPristineForModel:function(e,t){this._eachPristineItem(function(r){var n=T(r,e);if(n>-1)return t(n,r),!0})},_removePristineForModel:function(e){this._executeOnPristineForModel(e,function(e,t){t.splice(e,1)})},_readData:function(e){var t=this._isServerGrouped()?this.reader.groups:this.reader.data;return t.call(this.reader,e)},_eachPristineItem:function(e){this._eachItem(this._pristineData,e)},_eachItem:function(e,t){e&&e.length&&(this._isServerGrouped()?O(e,t):t(e))},_pristineForModel:function(e){var t,r,n=function(n){if(r=T(n,e),r>-1)return t=n[r],!0};return this._eachPristineItem(n),t},_cancelModel:function(e){var t=this._pristineForModel(e);this._eachItem(this._data,function(r){var n=F(r,e);n>=0&&(!t||e.isNew()&&!t.__state__?r.splice(n,1):(r[n].accept(t),"update"==t.__state__&&(r[n].dirty=!0)))})},_submit:function(t,r){var n=this;n.trigger(he,{type:"submit"}),n.transport.submit(U({success:function(r,n){var i=e.grep(t,function(e){return e.type==n})[0];i&&i.resolve({response:r,models:i.models,type:n})},error:function(e,r,i){for(var a=0;a<t.length;a++)t[a].reject(e);n.error(e,r,i)}},r))},_sendSubmit:function(t,r,n){var i=this,a=[];return i.options.batch&&(t.length&&a.push(e.Deferred(function(e){e.type="create",e.models=t})),r.length&&a.push(e.Deferred(function(e){e.type="update",e.models=r})),n.length&&a.push(e.Deferred(function(e){e.type="destroy",e.models=n})),i._submit(a,{data:{created:i.reader.serialize(y(t)),updated:i.reader.serialize(y(r)),destroyed:i.reader.serialize(y(n))}})),a},_promise:function(t,r,n){var i=this;return e.Deferred(function(e){i.trigger(he,{type:n}),i.transport[n].call(i.transport,U({success:function(t){e.resolve({response:t,models:r,type:n})},error:function(t,r,n){e.reject(t),i.error(t,r,n)}},t))}).promise()},_send:function(e,t){var r,n,i=this,a=[],s=i.reader.serialize(y(t));if(i.options.batch)t.length&&a.push(i._promise({data:{models:s}},t,e));else for(r=0,n=t.length;r<n;r++)a.push(i._promise({data:s[r]},[t[r]],e));return a},read:function(t){var r=this,n=r._params(t),i=e.Deferred();
return r._queueRequest(n,function(){var e=r.trigger(he,{type:"read"});e?(r._dequeueRequest(),i.resolve(e)):(r.trigger(ce),r._ranges=[],r.trigger("reset"),r.online()?r.transport.read({data:n,success:function(e){r._ranges=[],r.success(e,n),i.resolve()},error:function(){var e=qe.call(arguments);r.error.apply(r,e),i.reject.apply(i,e)}}):null!=r.options.offlineStorage&&(r.success(r.offlineData(),n),i.resolve()))}),i.promise()},_readAggregates:function(e){return this.reader.aggregates(e)},success:function(e){var t=this,r=t.options;if(t.trigger(ge,{response:e,type:"read"}),t.online()){if(e=t.reader.parse(e),t._handleCustomErrors(e))return void t._dequeueRequest();t._total=t.reader.total(e),t._aggregate&&r.serverAggregates&&(t._aggregateResult=t._readAggregates(e)),e=t._readData(e),t._destroyed=[]}else{e=t._readData(e);var n,i=[],a={},s=t.reader.model,o=s?s.idField:"id";for(n=0;n<this._destroyed.length;n++){var u=this._destroyed[n][o];a[u]=u}for(n=0;n<e.length;n++){var l=e[n],f=l.__state__;"destroy"==f?a[l[o]]||this._destroyed.push(this._createNewModel(l)):i.push(l)}e=i,t._total=e.length}t._pristineTotal=t._total,t._pristineData=e.slice(0),t._detachObservableParents(),t._data=t._observe(e),t._markOfflineUpdatesAsDirty(),t._storeData(),t._addRange(t._data),t._process(t._data),t._dequeueRequest()},_detachObservableParents:function(){if(this._data&&this._shouldDetachObservableParents)for(var e=0;e<this._data.length;e++)this._data[e].parent&&(this._data[e].parent=X)},_storeData:function(e){function t(e){for(var i=[],a=0;a<e.length;a++){var s=e.at(a),o=s.toJSON();r&&s.items?o.items=t(s.items):(o.uid=s.uid,n&&(s.isNew()?o.__state__="create":s.dirty&&(o.__state__="update"))),i.push(o)}return i}var r=this._isServerGrouped(),n=this.reader.model;if(null!=this.options.offlineStorage){for(var i=t(this._data),a=[],s=0;s<this._destroyed.length;s++){var o=this._destroyed[s].toJSON();o.__state__="destroy",a.push(o)}this.offlineData(i.concat(a)),e&&(this._pristineData=this._readData(i))}},_addRange:function(e){var t=this,r=t._skip||0,n=r+t._flatData(e,!0).length;t._ranges.push({start:r,end:n,data:e,timestamp:(new Date).getTime()}),t._ranges.sort(function(e,t){return e.start-t.start})},error:function(e,t,r){this._dequeueRequest(),this.trigger(ge,{}),this.trigger(de,{xhr:e,status:t,errorThrown:r})},_params:function(e){var t=this,r=U({take:t.take(),skip:t.skip(),page:t.page(),pageSize:t.pageSize(),sort:t._sort,filter:t._filter,group:t._group,aggregate:t._aggregate},e);return t.options.serverPaging||(delete r.take,delete r.skip,delete r.page,delete r.pageSize),t.options.serverGrouping?t.reader.model&&r.group&&(r.group=M(r.group,t.reader.model)):delete r.group,t.options.serverFiltering?t.reader.model&&r.filter&&(r.filter=N(r.filter,t.reader.model)):delete r.filter,t.options.serverSorting?t.reader.model&&r.sort&&(r.sort=M(r.sort,t.reader.model)):delete r.sort,t.options.serverAggregates?t.reader.model&&r.aggregate&&(r.aggregate=M(r.aggregate,t.reader.model)):delete r.aggregate,r},_queueRequest:function(e,r){var n=this;n._requestInProgress?n._pending={callback:J(r,n),options:e}:(n._requestInProgress=!0,n._pending=t,r())},_dequeueRequest:function(){var e=this;e._requestInProgress=!1,e._pending&&e._queueRequest(e._pending.options,e._pending.callback)},_handleCustomErrors:function(e){if(this.reader.errors){var t=this.reader.errors(e);if(t)return this.trigger(de,{xhr:null,status:"customerror",errorThrown:"custom error",errors:t}),!0}return!1},_shouldWrap:function(e){var t=this.reader.model;return!(!t||!e.length)&&!(e[0]instanceof t)},_observe:function(e){var t=this,r=t.reader.model;if(t._shouldDetachObservableParents=!0,e instanceof Pe)t._shouldDetachObservableParents=!1,t._shouldWrap(e)&&(e.type=t.reader.model,e.wrapAll(e,e));else{var n=t.pageSize()&&!t.options.serverPaging?Ce:Pe;e=new n(e,t.reader.model),e.parent=function(){return t.parent()}}return t._isServerGrouped()&&D(e,r),t._changeHandler&&t._data&&t._data instanceof Pe?t._data.unbind(ue,t._changeHandler):t._changeHandler=J(t._change,t),e.bind(ue,t._changeHandler)},_updateTotalForAction:function(e,t){var r=this,n=parseInt(r._total,10);v(r._total)||(n=parseInt(r._pristineTotal,10)),"add"===e?n+=t.length:"remove"===e?n-=t.length:"itemchange"===e||"sync"===e||r.options.serverPaging?"sync"===e&&(n=r._pristineTotal=parseInt(r._total,10)):n=r._pristineTotal,r._total=n},_change:function(e){var t,r,n=this,i=e?e.action:"";if("remove"===i)for(t=0,r=e.items.length;t<r;t++)e.items[t].isNew&&e.items[t].isNew()||n._destroyed.push(e.items[t]);if(!n.options.autoSync||"add"!==i&&"remove"!==i&&"itemchange"!==i)n._updateTotalForAction(i,e?e.items:[]),n._process(n._data,e);else{var a=function(t){"sync"===t.action&&(n.unbind("change",a),n._updateTotalForAction(i,e.items))};n.first("change",a),n.sync()}},_calculateAggregates:function(e,t){t=t||{};var r=new a(e),n=t.aggregate,i=t.filter;return i&&(r=r.filter(i)),r.aggregate(n)},_process:function(e,r){var n,i=this,a={};i.options.serverPaging!==!0&&(a.skip=i._skip,a.take=i._take||i._pageSize,a.skip===t&&i._page!==t&&i._pageSize!==t&&(a.skip=(i._page-1)*i._pageSize)),i.options.serverSorting!==!0&&(a.sort=i._sort),i.options.serverFiltering!==!0&&(a.filter=i._filter),i.options.serverGrouping!==!0&&(a.group=i._group),i.options.serverAggregates!==!0&&(a.aggregate=i._aggregate,i._aggregateResult=i._calculateAggregates(e,a)),n=i._queryProcess(e,a),i.view(n.data),n.total===t||i.options.serverFiltering||(i._total=n.total),r=r||{},r.items=r.items||i._view,i.trigger(ue,r)},_queryProcess:function(e,t){return a.process(e,t)},_mergeState:function(e){var r=this;return e!==t&&(r._pageSize=e.pageSize,r._page=e.page,r._sort=e.sort,r._filter=e.filter,r._group=e.group,r._aggregate=e.aggregate,r._skip=r._currentRangeStart=e.skip,r._take=e.take,r._skip===t&&(r._skip=r._currentRangeStart=r.skip(),e.skip=r.skip()),r._take===t&&r._pageSize!==t&&(r._take=r._pageSize,e.take=r._take),e.sort&&(r._sort=e.sort=s(e.sort)),e.filter&&(r._filter=e.filter=u(e.filter)),e.group&&(r._group=e.group=g(e.group)),e.aggregate&&(r._aggregate=e.aggregate=c(e.aggregate))),e},query:function(r){var n,i=this.options.serverSorting||this.options.serverPaging||this.options.serverFiltering||this.options.serverGrouping||this.options.serverAggregates;if(i||(this._data===t||0===this._data.length)&&!this._destroyed.length)return this.read(this._mergeState(r));var a=this.trigger(he,{type:"read"});return a||(this.trigger(ce),n=this._queryProcess(this._data,this._mergeState(r)),this.options.serverFiltering||(n.total!==t?this._total=n.total:this._total=this._data.length),this._aggregateResult=this._calculateAggregates(this._data,r),this.view(n.data),this.trigger(ge,{type:"read"}),this.trigger(ue,{items:n.data})),e.Deferred().resolve(a).promise()},fetch:function(e){var t=this,r=function(r){r!==!0&&Z(e)&&e.call(t)};return this._query().then(r)},_query:function(e){var t=this;return t.query(U({},{page:t.page(),pageSize:t.pageSize(),sort:t.sort(),filter:t.filter(),group:t.group(),aggregate:t.aggregate()},e))},next:function(e){var t=this,r=t.page(),n=t.total();if(e=e||{},r&&!(n&&r+1>t.totalPages()))return t._skip=t._currentRangeStart=r*t.take(),r+=1,e.page=r,t._query(e),r},prev:function(e){var t=this,r=t.page();if(e=e||{},r&&1!==r)return t._skip=t._currentRangeStart=t._skip-t.take(),r-=1,e.page=r,t._query(e),r},page:function(e){var r,n=this;return e!==t?(e=ye.max(ye.min(ye.max(e,1),n.totalPages()),1),void n._query({page:e})):(r=n.skip(),r!==t?ye.round((r||0)/(n.take()||1))+1:t)},pageSize:function(e){var r=this;return e!==t?void r._query({pageSize:e,page:1}):r.take()},sort:function(e){var r=this;return e!==t?void r._query({sort:e}):r._sort},filter:function(e){var r=this;return e===t?r._filter:(r.trigger("reset"),void r._query({filter:e,page:1}))},group:function(e){var r=this;return e!==t?void r._query({group:e}):r._group},total:function(){return parseInt(this._total||0,10)},aggregate:function(e){var r=this;return e!==t?void r._query({aggregate:e}):r._aggregate},aggregates:function(){var e=this._aggregateResult;return V(e)&&(e=this._emptyAggregates(this.aggregate())),e},_emptyAggregates:function(e){var t={};if(!V(e)){var r={};W(e)||(e=[e]);for(var n=0;n<e.length;n++)r[e[n].aggregate]=0,t[e[n].field]=r}return t},_wrapInEmptyGroup:function(e){var t,r,n,i,a=this.group();for(n=a.length-1,i=0;n>=i;n--)r=a[n],t={value:e.get(r.field),field:r.field,items:t?[t]:[e],hasSubgroups:!!t,aggregates:this._emptyAggregates(r.aggregates)};return t},totalPages:function(){var e=this,t=e.pageSize()||e.total();return ye.ceil((e.total()||0)/t)},inRange:function(e,t){var r=this,n=ye.min(e+t,r.total());return!r.options.serverPaging&&r._data.length>0||r._findRange(e,n).length>0},lastRange:function(){var e=this._ranges;return e[e.length-1]||{start:0,end:0,data:[]}},firstItemUid:function(){var e=this._ranges;return e.length&&e[0].data.length&&e[0].data[0].uid},enableRequestsInProgress:function(){this._skipRequestsInProgress=!1},_timeStamp:function(){return(new Date).getTime()},range:function(e,r){this._currentRequestTimeStamp=this._timeStamp(),this._skipRequestsInProgress=!0,e=ye.min(e||0,this.total());var n,i=this,a=ye.max(ye.floor(e/r),0)*r,s=ye.min(a+r,i.total());if(n=i._findRange(e,ye.min(e+r,i.total())),n.length){i._pending=t,i._skip=e>i.skip()?ye.min(s,(i.totalPages()-1)*i.take()):a,i._currentRangeStart=e,i._take=r;var o=i.options.serverPaging,u=i.options.serverSorting,l=i.options.serverFiltering,f=i.options.serverAggregates;try{i.options.serverPaging=!0,i._isServerGrouped()||i.group()&&i.group().length||(i.options.serverSorting=!0),i.options.serverFiltering=!0,i.options.serverPaging=!0,i.options.serverAggregates=!0,o&&(i._detachObservableParents(),i._data=n=i._observe(n)),i._process(n)}finally{i.options.serverPaging=o,i.options.serverSorting=u,i.options.serverFiltering=l,i.options.serverAggregates=f}}else r!==t&&(i._rangeExists(a,s)?a<e&&i.prefetch(s,r,function(){i.range(e,r)}):i.prefetch(a,r,function(){e>a&&s<i.total()&&!i._rangeExists(s,ye.min(s+r,i.total()))?i.prefetch(s,r,function(){i.range(e,r)}):i.range(e,r)}))},_findRange:function(e,r){var n,i,a,o,u,l,f,d,h,c,p,_=this,v=_._ranges,m=[],y=_.options,S=y.serverSorting||y.serverPaging||y.serverFiltering||y.serverGrouping||y.serverAggregates;for(i=0,p=v.length;i<p;i++)if(n=v[i],e>=n.start&&e<=n.end){for(c=0,a=i;a<p;a++)if(n=v[a],h=_._flatData(n.data,!0),h.length&&e+c>=n.start){if(l=n.data,f=n.end,!S){var b=g(_.group()||[]).concat(s(_.sort()||[]));d=_._queryProcess(n.data,{sort:b,filter:_.filter()}),h=l=d.data,d.total!==t&&(f=d.total)}if(o=0,e+c>n.start&&(o=e+c-n.start),u=h.length,f>r&&(u-=f-r),c+=u-o,m=_._mergeGroups(m,l,o,u),r<=n.end&&c==r-e)return m}break}return[]},_mergeGroups:function(e,t,r,n){if(this._isServerGrouped()){var i,a=t.toJSON();return e.length&&(i=e[e.length-1]),x(i,a,r,n),e.concat(a)}return e.concat(t.slice(r,n))},skip:function(){var e=this;return e._skip===t?e._page!==t?(e._page-1)*(e.take()||1):t:e._skip},currentRangeStart:function(){return this._currentRangeStart||0},take:function(){return this._take||this._pageSize},_prefetchSuccessHandler:function(e,t,r,n){var i=this,a=i._timeStamp();return function(s){var o,u,l,f=!1,d={start:e,end:t,data:[],timestamp:i._timeStamp()};if(i._dequeueRequest(),i.trigger(ge,{response:s,type:"read"}),s=i.reader.parse(s),l=i._readData(s),l.length){for(o=0,u=i._ranges.length;o<u;o++)if(i._ranges[o].start===e){f=!0,d=i._ranges[o];break}f||i._ranges.push(d)}d.data=i._observe(l),d.end=d.start+i._flatData(d.data,!0).length,i._ranges.sort(function(e,t){return e.start-t.start}),i._total=i.reader.total(s),(n||a>=i._currentRequestTimeStamp||!i._skipRequestsInProgress)&&(r&&l.length?r():i.trigger(ue,{}))}},prefetch:function(e,t,r){var n=this,i=ye.min(e+t,n.total()),a={take:t,skip:e,page:e/t+1,pageSize:t,sort:n._sort,filter:n._filter,group:n._group,aggregate:n._aggregate};n._rangeExists(e,i)?r&&r():(clearTimeout(n._timeout),n._timeout=setTimeout(function(){n._queueRequest(a,function(){n.trigger(he,{type:"read"})?n._dequeueRequest():n.transport.read({data:n._params(a),success:n._prefetchSuccessHandler(e,i,r),error:function(){var e=qe.call(arguments);n.error.apply(n,e)}})})},100))},_multiplePrefetch:function(e,t,r){var n=this,i=ye.min(e+t,n.total()),a={take:t,skip:e,page:e/t+1,pageSize:t,sort:n._sort,filter:n._filter,group:n._group,aggregate:n._aggregate};n._rangeExists(e,i)?r&&r():n.trigger(he,{type:"read"})||n.transport.read({data:n._params(a),success:n._prefetchSuccessHandler(e,i,r,!0)})},_rangeExists:function(e,t){var r,n,i=this,a=i._ranges;for(r=0,n=a.length;r<n;r++)if(a[r].start<=e&&a[r].end>=t)return!0;return!1},_removeModelFromRanges:function(e){for(var t,r,n,i=0,a=this._ranges.length;i<a&&(n=this._ranges[i],this._eachItem(n.data,function(n){t=C(n,e),t&&(r=!0)}),!r);i++);},_updateRangesLength:function(){for(var e,t,r=0,n=0,i=this._ranges.length;n<i;n++)e=this._ranges[n],e.start=e.start-r,t=this._flatData(e.data,!0).length,r=e.end-t,e.end=e.start+t}}),Ve={};Ve.create=function(t,r,n){var i,a=t.transport?e.extend({},t.transport):null;return a?(a.read=typeof a.read===re?{url:a.read}:a.read,"jsdo"===t.type&&(a.dataSource=n),t.type&&(Y.data.transports=Y.data.transports||{},Y.data.schemas=Y.data.schemas||{},Y.data.transports[t.type]?H(Y.data.transports[t.type])?a=U(!0,{},Y.data.transports[t.type],a):i=new Y.data.transports[t.type](U(a,{data:r})):Y.logToConsole("Unknown DataSource transport type '"+t.type+"'.\nVerify that registration scripts for this type are included after Kendo UI on the page.","warn"),t.schema=U(!0,{},Y.data.schemas[t.type],t.schema)),i||(i=Z(a.read)?a:new Le(a))):i=new Be({data:t.data||[]}),i},He.create=function(e){(W(e)||e instanceof Pe)&&(e={data:e});var r,n,i,a=e||{},s=a.data,o=a.fields,u=a.table,l=a.select,f={};if(s||!o||a.transport||(u?s=G(u,o):l&&(s=j(l,o),a.group===t&&s[0]&&s[0].optgroup!==t&&(a.group="optgroup"))),Y.data.Model&&o&&(!a.schema||!a.schema.model)){for(r=0,n=o.length;r<n;r++)i=o[r],i.type&&(f[i.field]=i);V(f)||(a.schema=U(!0,a.schema,{model:{fields:f}}))}return a.data=s,l=null,a.select=null,u=null,a.table=null,a instanceof He?a:new He(a)};var We=Ie.define({idField:"id",init:function(e){var t=this,r=t.hasChildren||e&&e.hasChildren,n="items",i={};Y.data.Model.fn.init.call(t,e),typeof t.children===re&&(n=t.children),i={schema:{data:n,model:{hasChildren:r,id:t.idField,fields:t.fields}}},typeof t.children!==re&&U(i,t.children),i.data=e,r||(r=i.schema.data),typeof r===re&&(r=Y.getter(r)),Z(r)&&(t.hasChildren=!!r.call(t,t)),t._childrenOptions=i,t.hasChildren&&t._initChildren(),t._loaded=!(!e||!e._loaded)},_initChildren:function(){var e,t,r,n=this;n.children instanceof $e||(e=n.children=new $e(n._childrenOptions),t=e.transport,r=t.parameterMap,t.parameterMap=function(e,t){return e[n.idField||"id"]=n.id,r&&(e=r(e,t)),e},e.parent=function(){return n},e.bind(ue,function(e){e.node=e.node||n,n.trigger(ue,e)}),e.bind(de,function(e){var t=n.parent();t&&(e.node=e.node||n,t.trigger(de,e))}),n._updateChildrenField())},append:function(e){this._initChildren(),this.loaded(!0),this.children.add(e)},hasChildren:!1,level:function(){for(var e=this.parentNode(),t=0;e&&e.parentNode;)t++,e=e.parentNode?e.parentNode():null;return t},_updateChildrenField:function(){var e=this._childrenOptions.schema.data;this[e||"items"]=this.children.data()},_childrenLoaded:function(){this._loaded=!0,this._updateChildrenField()},load:function(){var r,n,i={},a="_query";return this.hasChildren?(this._initChildren(),r=this.children,i[this.idField||"id"]=this.id,this._loaded||(r._data=t,a="read"),r.one(ue,J(this._childrenLoaded,this)),n=r[a](i)):this.loaded(!0),n||e.Deferred().resolve().promise()},parentNode:function(){var e=this.parent();return e.parent()},loaded:function(e){return e===t?this._loaded:void(this._loaded=e)},shouldSerialize:function(e){return Ie.fn.shouldSerialize.call(this,e)&&"children"!==e&&"_loaded"!==e&&"hasChildren"!==e&&"_childrenOptions"!==e}}),$e=He.extend({init:function(e){var t=We.define({children:e});He.fn.init.call(this,U(!0,{},{schema:{modelBase:t,model:t}},e)),this._attachBubbleHandlers()},_attachBubbleHandlers:function(){var e=this;e._data.bind(de,function(t){e.trigger(de,t)})},remove:function(e){var t,r=e.parentNode(),n=this;return r&&r._initChildren&&(n=r.children),t=He.fn.remove.call(n,e),r&&!n.data().length&&(r.hasChildren=!1),t},success:E("success"),data:E("data"),insert:function(e,t){var r=this.parent();return r&&r._initChildren&&(r.hasChildren=!0,r._initChildren()),He.fn.insert.call(this,e,t)},_find:function(e,t){var r,n,i,a,s=this._data;if(s){if(i=He.fn[e].call(this,t))return i;for(s=this._flatData(this._data),r=0,n=s.length;r<n;r++)if(a=s[r].children,a instanceof $e&&(i=a[e](t)))return i}},get:function(e){return this._find("get",e)},getByUid:function(e){return this._find("getByUid",e)}});$e.create=function(e){e=e&&e.push?{data:e}:e;var t=e||{},r=t.data,n=t.fields,i=t.list;return r&&r._dataSource?r._dataSource:(r||!n||t.transport||i&&(r=B(i,n)),t.data=r,t instanceof $e?t:new $e(t))};var Qe=Y.Observable.extend({init:function(e,t,r){Y.Observable.fn.init.call(this),this._prefetching=!1,this.dataSource=e,this.prefetch=!r;var n=this;e.bind("change",function(){n._change()}),e.bind("reset",function(){n._reset()}),this._syncWithDataSource(),this.setViewSize(t)},setViewSize:function(e){this.viewSize=e,this._recalculate()},at:function(e){var t=this.pageSize,r=!0;return e>=this.total()?(this.trigger("endreached",{index:e}),null):this.useRanges?this.useRanges?((e<this.dataOffset||e>=this.skip+t)&&(r=this.range(Math.floor(e/t)*t)),e===this.prefetchThreshold&&this._prefetch(),e===this.midPageThreshold?this.range(this.nextMidRange,!0):e===this.nextPageThreshold?this.range(this.nextFullRange):e===this.pullBackThreshold&&(this.offset===this.skip?this.range(this.previousMidRange):this.range(this.previousFullRange)),r?this.dataSource.at(e-this.dataOffset):(this.trigger("endreached",{index:e}),null)):void 0:this.dataSource.view()[e]},indexOf:function(e){return this.dataSource.data().indexOf(e)+this.dataOffset},total:function(){return parseInt(this.dataSource.total(),10)},next:function(){var e=this,t=e.pageSize,r=e.skip-e.viewSize+t,n=ye.max(ye.floor(r/t),0)*t;this.offset=r,this.dataSource.prefetch(n,t,function(){e._goToRange(r,!0)})},range:function(e,t){if(this.offset===e)return!0;var r=this,n=this.pageSize,i=ye.max(ye.floor(e/n),0)*n,a=this.dataSource;return t&&(i+=n),a.inRange(e,n)?(this.offset=e,this._recalculate(),this._goToRange(e),!0):!this.prefetch||(a.prefetch(i,n,function(){r.offset=e,r._recalculate(),r._goToRange(e,!0)}),!1)},syncDataSource:function(){var e=this.offset;this.offset=null,this.range(e)},destroy:function(){this.unbind()},_prefetch:function(){var e=this,t=this.pageSize,r=this.skip+t,n=this.dataSource;n.inRange(r,t)||this._prefetching||!this.prefetch||(this._prefetching=!0,this.trigger("prefetching",{skip:r,take:t}),n.prefetch(r,t,function(){e._prefetching=!1,e.trigger("prefetched",{skip:r,take:t})}))},_goToRange:function(e,t){this.offset===e&&(this.dataOffset=e,this._expanding=t,this.dataSource.range(e,this.pageSize),this.dataSource.enableRequestsInProgress())},_reset:function(){this._syncPending=!0},_change:function(){var e=this.dataSource;this.length=this.useRanges?e.lastRange().end:e.view().length,this._syncPending&&(this._syncWithDataSource(),this._recalculate(),this._syncPending=!1,this.trigger("reset",{offset:this.offset})),this.trigger("resize"),this._expanding&&this.trigger("expand"),delete this._expanding},_syncWithDataSource:function(){var e=this.dataSource;this._firstItemUid=e.firstItemUid(),this.dataOffset=this.offset=e.skip()||0,this.pageSize=e.pageSize(),this.useRanges=e.options.serverPaging},_recalculate:function(){var e=this.pageSize,t=this.offset,r=this.viewSize,n=Math.ceil(t/e)*e;this.skip=n,this.midPageThreshold=n+e-1,this.nextPageThreshold=n+r-1,this.prefetchThreshold=n+Math.floor(e/3*2),this.pullBackThreshold=this.offset-1,this.nextMidRange=n+e-r,this.nextFullRange=n,this.previousMidRange=t-r,this.previousFullRange=n-e}}),Ke=Y.Observable.extend({init:function(e,t){var r=this;Y.Observable.fn.init.call(r),this.dataSource=e,this.batchSize=t,this._total=0,this.buffer=new Qe(e,3*t),this.buffer.bind({endreached:function(e){r.trigger("endreached",{index:e.index})},prefetching:function(e){r.trigger("prefetching",{skip:e.skip,take:e.take})},prefetched:function(e){r.trigger("prefetched",{skip:e.skip,take:e.take})},reset:function(){r._total=0,r.trigger("reset")},resize:function(){r._total=Math.ceil(this.length/r.batchSize),r.trigger("resize",{total:r.total(),offset:this.offset})}})},syncDataSource:function(){this.buffer.syncDataSource()},at:function(e){var t,r=this.buffer,n=e*this.batchSize,i=this.batchSize,a=[];r.offset>n&&r.at(r.offset-1);for(var s=0;s<i&&(t=r.at(n+s),null!==t);s++)a.push(t);return a},total:function(){return this._total},destroy:function(){this.buffer.destroy(),this.unbind()}});U(!0,Y.data,{readers:{json:Je},Query:a,DataSource:He,HierarchicalDataSource:$e,Node:We,ObservableObject:Te,ObservableArray:Pe,LazyObservableArray:Ce,LocalTransport:Be,RemoteTransport:Le,Cache:Ue,DataReader:Je,Model:Ie,Buffer:Qe,BatchBuffer:Ke})}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t,r){(r||t)()});